#!/bin/sh
# This file was generated by Puppet.
# Local modifications can be overwritten.
#
# Register '<%= @prefix %>/<%= @archive %>/jre' as available
#

#
# We have to check if the below exists before calling 'update-alertnatives' :(
if ( ! [ -f "/usr/lib/jvm" ] || ! [ -L "/usr/lib/jvm" ] ) ; then
  mkdir -p /usr/lib/jvm && chmod 755 /usr/lib/jvm
fi
if ( ! [ -f "/usr/lib/jvm/jre" ] || ! [ -L "/usr/lib/jvm/jre" ] ) ; then
  ln -s "<%= @prefix %>/<%= @archive %>/jre" "/usr/lib/jvm/jre"
fi
if ( ! [ -f "/usr/lib/jvm/jre-sun" ] || ! [ -L "/usr/lib/jvm/jre-sun" ] ) ; then
  ln -s "<%= @prefix %>/<%= @archive %>/jre" "/usr/lib/jvm/jre-sun"
fi
if ( ! [ -f "/usr/lib/jvm/jre-<%= @version %>" ] || ! [-L "/usr/lib/jvm/jre-<%= @version %>" ] ) ; then
  ln -s "<%= @prefix %>/<%= @archive %>/jre" "/usr/lib/jvm/jre-<%= @version %>"
fi

#
# Register our JRE in 'alternatives'
update-alternatives --install /usr/bin/java java <%= @prefix %>/<%= @archive %>/jre/bin/java 170051 \
--slave /usr/lib/jvm/jre                   jre                         <%= @prefix %>/<%= @archive %>/jre \
--slave /usr/bin/javaws                    javaws                      <%= @prefix %>/<%= @archive %>/jre/bin/javaws \
--slave /usr/bin/keytool                   keytool                     <%= @prefix %>/<%= @archive %>/jre/bin/keytool \
--slave /usr/bin/orbd                      orbd                        <%= @prefix %>/<%= @archive %>/jre/bin/orbd \
--slave /usr/bin/policytool                policytool                  <%= @prefix %>/<%= @archive %>/jre/bin/policytool \
--slave /usr/bin/rmid                      rmid                        <%= @prefix %>/<%= @archive %>/jre/bin/rmid \
--slave /usr/bin/rmiregistry               rmiregistry                 <%= @prefix %>/<%= @archive %>/jre/bin/rmiregistry \
--slave /usr/bin/servertool                servertool                  <%= @prefix %>/<%= @archive %>/jre/bin/servertool \
--slave /usr/bin/tnameserv                 tnameserv                   <%= @prefix %>/<%= @archive %>/jre/bin/tnameserv \
--slave /usr/bin/jar                       jar                         <%= @prefix %>/<%= @archive %>/bin/jar \
--slave /usr/share/man/man1/java.1         java.1                      <%= @prefix %>/<%= @archive %>/man/man1/java.1 \
--slave /usr/share/man/man1/javaws.1       javaws.1                    <%= @prefix %>/<%= @archive %>/man/man1/javaws.1 \
--slave /usr/share/man/man1/keytool.1      keytool.1                   <%= @prefix %>/<%= @archive %>/man/man1/keytool.1 \
--slave /usr/share/man/man1/orbd.1         orbd.1                      <%= @prefix %>/<%= @archive %>/man/man1/orbd.1 \
--slave /usr/share/man/man1/policytool.1   policytool.1                <%= @prefix %>/<%= @archive %>/man/man1/policytool.1 \
--slave /usr/share/man/man1/rmid.1         rmid.1                      <%= @prefix %>/<%= @archive %>/man/man1/rmid.1 \
--slave /usr/share/man/man1/rmiregistry.1  rmiregistry.1               <%= @prefix %>/<%= @archive %>/man/man1/rmiregistry.1 \
--slave /usr/share/man/man1/servertool.1   servertool.1                <%= @prefix %>/<%= @archive %>/man/man1/servertool.1 \
--slave /usr/share/man/man1/tnameserv.1    tnameserv.1                 <%= @prefix %>/<%= @archive %>/man/man1/tnameserv.1 \
--slave /usr/share/man/man1/jar.1          jar.1                       <%= @prefix %>/<%= @archive %>/man/man1/jar.1

update-alternatives --install /usr/lib/jvm/jre-sun jre_sun <%= @prefix %>/<%= @archive %>/jre 170051

update-alternatives --install /usr/lib/jvm/jre-<%= @version %> jre_<%= @version %> <%= @prefix %>/<%= @archive %>/jre 170051

