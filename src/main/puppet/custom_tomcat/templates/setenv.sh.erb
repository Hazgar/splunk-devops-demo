#!/bin/bash
#
# Dynamically generated by Puppet on <%= @fqdn %>
#
# Local modifications will be overwritten by Puppet.
#
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# -----------------------------------------------------------------------------
#
#   CATALINA_OPTS   (Optional) Java runtime options used when the "start",
#                   "stop", or "run" command is executed.

# 
<% @java_opts.each do |opt| -%>
<%= opt %>
<% end -%>

# Load config modules parameters
ENV_FILES=$(find "<%= @catalina_base %>/bin" -name "*-setenv.sh")
IFS=$'\n'
for file in $ENV_FILES ; do
  source "$file"
done
IFS=' '

<% if @balancer_libs_name and @balancer_libs_version and @balancer_libs_path then -%>
if [ -f "<%= @balancer_libs_path %>/<%= @balancer_libs_name %>-<%= @balancer_libs_version %>/libs.sh" ] ; then
  source "<%= @balancer_libs_path %>/<%= @balancer_libs_name %>-<%= @balancer_libs_version %>/libs.sh"
fi
<%- end %>

# CATALINA_PID and JVM_ROUTE are used to identify processes in RC scripts
CATALINA_PID="<%= @catalina_base %>/logs/catalina.pid"
JVM_ROUTE="$(uname -n)_<%= @instance_name %>"
CATALINA_OPTS="${CATALINA_OPTS} -Dtomcat.jvmroute=$JVM_ROUTE"

